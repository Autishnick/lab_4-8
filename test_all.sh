#!/bin/bash
# Повна перевірка: тести, логування, email

echo "╔════════════════════════════════════════════════════════════╗"
echo "║          ПОВНА ПЕРЕВІРКА MUSIC SYSTEM                      ║"
echo "╚════════════════════════════════════════════════════════════╝"
echo ""

# 1. ЮНІТ ТЕСТИ
echo "═══════════════════════════════════════════════════════════"
echo "1️⃣  ЗАПУСК ЮНІТ ТЕСТІВ"
echo "═══════════════════════════════════════════════════════════"
./test.sh
echo ""

# 2. ПЕРЕВІРКА ЛОГУВАННЯ
echo "═══════════════════════════════════════════════════════════"
echo "2️⃣  ПЕРЕВІРКА ЛОГУВАННЯ У ФАЙЛ"
echo "═══════════════════════════════════════════════════════════"
./test_logging.sh
echo ""

# 3. ПЕРЕВІРКА EMAIL
echo "═══════════════════════════════════════════════════════════"
echo "3️⃣  ПЕРЕВІРКА EMAIL СПОВІЩЕНЬ"
echo "═══════════════════════════════════════════════════════════"
echo "📦 Компіляція тестового класу..."
javac -cp "libs/javax.mail-1.6.2.jar:libs/activation-1.1.1.jar" -d bin -encoding UTF-8 -sourcepath src src/com/musicsystem/TestEmailAndLogging.java

if [ $? -eq 0 ]; then
    echo "✅ Компіляція успішна!"
    echo ""
    echo "🚀 Запуск тесту логування та email..."
    echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
    java -cp "bin:libs/javax.mail-1.6.2.jar:libs/activation-1.1.1.jar" com.musicsystem.TestEmailAndLogging
else
    echo "❌ Помилка компіляції!"
fi

echo ""
echo "╔════════════════════════════════════════════════════════════╗"
echo "║                  ВСІ ПЕРЕВІРКИ ЗАВЕРШЕНІ                   ║"
echo "╚════════════════════════════════════════════════════════════╝"
echo ""
echo "📋 Що перевірити:"
echo "   ✓ Результати юніт тестів (вище)"
echo "   ✓ Файл логів: logs/application.log"
echo "   ✓ Email пошту (якщо налаштовано)"
echo ""

